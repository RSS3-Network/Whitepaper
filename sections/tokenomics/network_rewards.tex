\subsection{\glsfmtfull{NR}}
\label{subsec:network_rewards}

In \Cref{sec:VSL}, we describe the intentions behind the \gls{VSL}'s incentive mechanism, here we introduce the detailed \glsfmtlong{NR} calculation and distribution formulas separately.

The \glsfmtlong{NR} \networkReward\ consists of three parts:
\begin{equation}
    \label{eq:network_rewards}
    \networkReward = (\operationReward + \stakingReward) + \trustReward
\end{equation}

See \Cref{fig:network-rewards} for an illustration. The allocation to each part is determined by the Network, and is subject to potential future changes.

\subsubsection{\glsfmtfull{OR}}
\label{subsubsec:operation_rewards}

To encourage Normal Nodes to operate reliably and consistently to maintain the Network, \operationReward\ is allocated to a Node's \operationPool\ in proportion to its \glsfirst{Fee} collected on the \gls{DSL} during the last \epoch.

\begin{equation}
    \label{eq:operation_weight}
    \work_\nodeAtEpoch =
    \log_{2}
    (
    \frac{\fee_\nodeAtEpoch}
    {\sum_{x=0}^{\infty} \fee_{x, \epoch}} + 1
    ) * G
\end{equation}

$\work_\nodeAtEpoch$ denotes the normalized work contribution for a given Normal Node \node, at the end of a given epoch $\epoch$. $G$ is a constant equal to $\ln(2) \approx 0.693147$ used to offset the effect of replacing $\ln$ with $\log_2$, as the former is more costly in terms of gas when it comes to on-chain computation.

\begin{equation}
    \label{eq:operation_rewards}
    \networkReward_{\operation|\node, \epoch} =
    \frac{\work_\nodeAtEpoch}
    {\sum_{x=0}^{\infty} \work_{x, \epoch}}
    * \networkReward_{\operation, \epoch}
\end{equation}

$\networkReward_{\operation|\node, \epoch}$ therefore denotes the Operation Rewards for a given Normal Node \node, at the end of a given epoch $\epoch$.

\subsubsection{\glsfmtfull{SR}}
\label{subsubsec:staking_rewards}

To encourage participation from all network participants to increase the Network's reliability, \stakingReward\ is allocated to a Normal Node's \stakingPool\ in proportion to the amount of staked tokens in the entire Network during the last \epoch.

\begin{equation}
    \label{eq:staking_rewards}
    \networkReward_{\staking|\node, \epoch} =
    \frac{\pool_{\staking|\node, \epoch}}
    {\sum_{x=0}^{\infty} \pool_{\staking|x, \epoch}}
    * \networkReward_{\staking, \epoch}
\end{equation}

$\networkReward_{\staking|\node, \epoch}$ therefore denotes the Staking Rewards for a given Normal Node \node, at the end of a given epoch $\epoch$.

\subsubsection{\glsfmtfull{TR}}

To encourage participation from all network participants to increase the Network's reliability and support Public Goods provision, \trustReward\ is allocated to the \publicGoodPool\ in proportion to the amount of entrusted tokens in the entire Network during the last \epoch.

\begin{equation}
    \label{eq:trust_rewards}
    \networkReward_{\trust|\node, \epoch} =
    \frac{\pool_{\trust|\node, \epoch}}
    {\sum_{x=0}^{\infty} \pool_{\trust|x, \epoch}}
    * \networkReward_{\trust, \epoch}
\end{equation}

$\networkReward_{\trust|\node, \epoch}$ therefore denotes the \glsfmtlong{TR} for a given Public Good Node \node, at the end of a given epoch $\epoch$.

\subsubsection{Taxation (\tax)}
\label{subsubsec:taxation}

The tax rate \taxRate\ is set by the \glsfmtlong{NO} of a Normal Node, and is applied to the \glsfmtlong{NR} allocated to its \stakingPool.
The amount of tax collectible is capped at a maximum of \taxCap\ times the amount of the current deposit. \taxCap\ is set by the Network.

\begin{equation}
    \tax_{\node, \epoch} =
    \min(\deposit_{\node, \epoch}
    * \taxCap_\epoch , (\networkReward_{\staking|\node, \epoch}
    + \networkReward_{\operation|\node, \epoch} ) 
    * \taxRate_{\node, \epoch})
\end{equation}

\subsubsection{Final Allocations}
\label{subsubsec:allocation}

The total amount of tokens allocated to a Normal Node's \operationPool\ for a given epoch $\epoch$ is therefore:

\begin{equation}
    \fee_{\node, \epoch}
    + \tax_{\node, \epoch}
\end{equation}

The total amount of tokens allocated to a Normal Node's \stakingPool\ for a given epoch $\epoch$ is therefore:

\begin{equation}
    \networkReward_{\operation|\node, \epoch}
    + \networkReward_{\staking|\node, \epoch}
    - \tax_{\node, \epoch}
\end{equation}

The total amount of tokens allocated to a Public Good Node's \publicGoodPool\ for a given epoch $\epoch$ is therefore:

\begin{equation}
    \networkReward_{\trust|\node, \epoch}
\end{equation}

\subsection{Chip}

\subsection{Slashing}

Slashing is a mechanism used to enforce the Network's security and stability. It is applied to both Normal Nodes and Public Good Nodes, albeit in slightly different ways.

A slashing occurs when a Node fails to meet the requirements set by the Network. This can be due to a variety of reasons, including but not limited to: 1) the Node is offline for an extended period of time; 2) the Node is not serving requests in a timely manner; 3) the Node is serving requests but with incorrect information.

Should a slashing occur, the Node's \deposit\, \stakingPool\, and \networkReward\ will be slashed by precentages determined by the Network.
The Node's \reliabilityScore\ will be negatively impacted, diminishing its likelihood of receiving requests on the \gls{DSL}.

The disposition of the slashed tokens is as follows:
\begin{itemize}
    \item a portion of the slashed tokens will be burned, the amount is determined by the Network
    \item a portion of the slashed tokens will go to the reporter, provided the Nodeâ€™s misconduct was not auto-detected by the Network
    \item the remaining portion of the slashed tokens will go to the \publicGoodPool
\end{itemize}

% TODO: add slashing into formulas